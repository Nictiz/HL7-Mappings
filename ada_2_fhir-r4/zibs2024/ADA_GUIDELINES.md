# ADA guidelines

In this folder instances of the zib scenarios are added in ADA format, which are used to test the conversion from zibs to FHIR resources.

## ADA environment
All ADA instances are created via the ADA environment accessible at `https://decor.nictiz.nl/art-decor/ada-data/projects/zib2024-prerelease/views/zorginformatiebouwstenen_zib_2024_index.xhtml`. Make sure to add these while being logged in with the _zibs2024ada_ account. This ensures that instances that have been created in the context of this project can be easily distinguished from other instances, while also making it easy for anyone in the zibs2024 project to update existing instances (without copying existing ones made by other accounts).

## ADA instance conventions
### Types of ADA instances
* The example instances available on the respective zib's page are manually recreated as-is in an ADA instance. Note however that errors present in these examples (such as using the wrong zib concept to convey certain information) are corrected. ADA instances of this category are to be considered as representative real-life examples.
* In a lot of zib example instances not all concepts are filled (even if you'd combine all example instances of a certain zib), which is not convenient when fully testing the ADA-to-FHIR conversion. Moreover, the value of a certain zib concept might result in a completely different modeling in FHIR (e.g. based on a status or date/time concept, a zib instance might result in either a request or an event resource in FHIR), while not all these variants are worked out as separate zib example instances. In the above scenarios, additional ADA instances are created which contain at least these missing concepts (or values of concepts), and are preferably filled in as much as possible. ADA instances of this category are mostly created for testing purposes and therefore, the content might not reflect representative real-life examples.
* ADA instances of the former category SHOULD have a `title` and `id` of the form `nl-core-[English zib name]-0x`, where `x` denotes the 'sequence number' of the zib example (note that in most cases there is only a single example instance for each zib). Likewise, ADA instances of the latter category SHOULD have a `title` and `id` of the form `nl-core-[English zib name]-full-0x`, where `x` denotes the 'sequence number' of the additional instance. Note that the `title` and `id` attributes will be part of the `[zib name in snake case]_registratie` element in the resulting ADA instance.
* For zibs that are mapped within FHIR resources corresponding to *another* zib (e.g. the zibs LanguageProficiency, MaritalStatus and Nationality are part of Patient in FHIR), the ADA instances follow a slightly different convention. Instead of the prefix `nl-core-`, these will use `part-`.

### References
* Within each ADA instance the `id` on the root SHOULD be filled in the same way as described above. This `id` attribute will be part of the `[zib name in snake case]` element in the resulting ADA instance. It is used when another ADA instance refers to this ADA instance (via a so-called *external reference*).
* Each ADA instance SHOULD be linked to a Patient by adding a reference in the `zibroot` (with the exception of Patient ADA instances themselves). Make sure to keep the ADA instances of both categories as distinct sets (i.e. do not link an *additional* ADA instance to a Patient ADA instance based on a zib example).
* Whenever a zib refers to another zib (e.g. a Procedure has a performer, which is a reference to a HealthProfessional), the ADA instance of the referred zib is made separately from the 'main' ADA instance. These secondary ADA instances SHOULD have a `title` and `id` of the form `[id main ADA instance]-[English zib name]-0y`, where `y` is a 'sequence number' to support multiple references to the same zib. For instance, an ADA instance that represents the performer of a Procedure could have the form `nl-core-Procedure-01-HealthProfessional-01`.